(function(){CKEDITOR.plugins.add("image",{requires:"dialog",lang:"en",icons:"image",hidpi:true,init:function(c){if(c.plugins.image2){return}var d="image";CKEDITOR.dialog.add(d,this.path+"dialogs/image.min.js");var f="img[alt,!src]{border-style,border-width,float,height,margin,margin-bottom,margin-left,margin-right,margin-top,width}",e="img[alt,src]";if(CKEDITOR.dialog.isTabEnabled(c,d,"advanced")){f="img[alt,dir,id,lang,longdesc,!src,title]{*}(*)"}c.addCommand(d,new CKEDITOR.dialogCommand(d,{allowedContent:f,requiredContent:e,contentTransformations:[["img{width}: sizeToStyle","img[width]: sizeToAttribute"],["img{float}: alignmentToStyle","img[align]: alignmentToAttribute"]]}));c.ui.addButton&&c.ui.addButton("Image",{label:c.lang.common.image,command:d,toolbar:"insert,10"});c.on("doubleclick",function(g){var h=g.data.element;if(h.is("img")&&!h.data("cke-realelement")&&!h.isReadOnly()){g.data.dialog="image"}});if(c.addMenuItems){c.addMenuItems({image:{label:c.lang.image.menu,command:"image",group:"image"}})}if(c.contextMenu){c.contextMenu.addListener(function(g){if(a(c,g)){return{image:CKEDITOR.TRISTATE_OFF}}})}},afterInit:function(d){if(d.plugins.image2){return}c("left");c("right");c("center");c("block");function c(e){var f=d.getCommand("justify"+e);if(f){if(e=="left"||e=="right"){f.on("exec",function(g){var h=a(d),i;if(h){i=b(h);if(i==e){h.removeStyle("float");if(e==b(h)){h.removeAttribute("align")}}else{h.setStyle("float",e)}g.cancel()}})}f.on("refresh",function(g){var h=a(d),i;if(h){i=b(h);this.setState((i==e)?CKEDITOR.TRISTATE_ON:(e=="right"||e=="left")?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED);g.cancel()}})}}}});function a(d,c){if(!c){var e=d.getSelection();c=e.getSelectedElement()}if(c&&c.is("img")&&!c.data("cke-realelement")&&!c.isReadOnly()){return c}}function b(c){var d=c.getStyle("float");if(d=="inherit"||d=="none"){d=0}if(!d){d=c.getAttribute("align")}return d}})();CKEDITOR.config.image_removeLinkByEmptyURL=true;