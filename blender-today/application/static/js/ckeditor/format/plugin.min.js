CKEDITOR.plugins.add("format",{requires:"richcombo",lang:"en",init:function(f){if(f.blockless){return}var d=f.config,b=f.lang.format;var j=d.format_tags.split(";");var g={},k=0,c=[];for(var e=0;e<j.length;e++){var h=j[e];var a=new CKEDITOR.style(d["format_"+h]);if(!f.filter.customConfig||f.filter.check(a)){k++;g[h]=a;g[h]._.enterMode=f.config.enterMode;c.push(a)}}if(k===0){return}f.ui.addRichCombo("Format",{label:b.label,title:b.panelTitle,toolbar:"styles,20",allowedContent:c,panel:{css:[CKEDITOR.skin.getPath("editor")].concat(d.contentsCss),multiSelect:false,attributes:{"aria-label":b.panelTitle}},init:function(){this.startGroup(b.panelTitle);for(var i in g){var l=b["tag_"+i];this.add(i,g[i].buildPreview(l),l)}},onClick:function(m){f.focus();f.fire("saveSnapshot");var l=g[m],i=f.elementPath();f[l.checkActive(i,f)?"removeStyle":"applyStyle"](l);setTimeout(function(){f.fire("saveSnapshot")},0)},onRender:function(){f.on("selectionChange",function(n){var m=this.getValue(),l=n.data.path;this.refresh();for(var i in g){if(g[i].checkActive(l,f)){if(i!=m){this.setValue(i,f.lang.format["tag_"+i])}return}}this.setValue("")},this)},onOpen:function(){this.showAll();for(var i in g){var l=g[i];if(!f.activeFilter.check(l)){this.hideItem(i)}}},refresh:function(){var l=f.elementPath();if(!l){return}if(!l.isContextFor("p")){this.setState(CKEDITOR.TRISTATE_DISABLED);return}for(var i in g){if(f.activeFilter.check(g[i])){return}}this.setState(CKEDITOR.TRISTATE_DISABLED)}})}});CKEDITOR.config.format_tags="p;h1;h2;h3;h4;h5;h6;pre;address;div";CKEDITOR.config.format_p={element:"p"};CKEDITOR.config.format_div={element:"div"};CKEDITOR.config.format_pre={element:"pre"};CKEDITOR.config.format_address={element:"address"};CKEDITOR.config.format_h1={element:"h1"};CKEDITOR.config.format_h2={element:"h2"};CKEDITOR.config.format_h3={element:"h3"};CKEDITOR.config.format_h4={element:"h4"};CKEDITOR.config.format_h5={element:"h5"};CKEDITOR.config.format_h6={element:"h6"};