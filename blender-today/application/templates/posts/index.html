{% extends 'layout.html' %}
{% block body %}
<h3>All posts <small>({{posts|length}})</small></h3>

<div class="row post-index">
	<div class="col-md-9">
		{% for post in posts %}
		<div class="row post-index-item">
			<div class="col-md-1">
				<a href="{{url_for('posts.view', category=post.category.url, uuid=post.uuid)}}">
					<div class="post-index-item-type" title="{{post.rating.positive}} Upvotes, {{post.rating.negative}} Downvotes" {% if post.picture %}style="background: url(http://i.imgur.com/{{post.picture}}s.jpg) top left no-repeat"{% endif %}>
						{% if post.post_type.url == 'link' %}
							<i class="fa fa-link"></i>
						{% elif post.post_type.url == 'text' %}
							<i class="fa fa-file-text-o"></i>
						{% endif %}
					</div>
				</a>
			</div>
			<div class="col-md-11">
				<a class="post-index-item-title" href="{{url_for('posts.view', category=post.category.url, uuid=post.uuid)}}">
					{% if post.picture %}<i class="fa fa-picture-o"></i> {% endif %}
					{{post.title}}
				</a>
				<div class="post-index-item-details" href="{{url_for('posts.view', category=post.category.url, uuid=post.uuid)}}">
					<a class="post-index-item-rate up{% if post.user_rating and post.user_rating.is_positive %} rated{% endif %}" href="{{url_for('posts.rate', uuid=post.uuid, rating='1')}}">
						<i class="fa fa-arrow-up"></i>
					</a>
					<a class="post-index-item-rate down{% if post.user_rating and not post.user_rating.is_positive %} rated{% endif %}" href="{{url_for('posts.rate', uuid=post.uuid, rating='0')}}">
						<i class="fa fa-arrow-down"></i>
					</a>
					<span class="separator"></span>
					{{post.rating.positive - post.rating.negative}}
					<span class="separator"></span>
					{{post.post_type}}
					<span class="separator"></span>
					{{post.comments|length}} comments
					<span class="separator"></span>
					{{post.pretty_creation_date}}
					<small>by</small> {{post.user.first_name}} {{post.user.last_name}}
				</div>
			</div>
		</div>
		{% endfor %}
	</div>
</div>
{% endblock %}
